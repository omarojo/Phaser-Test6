<style type="text/css">
	body {
	   margin: 0;
	   padding: 0;
	}
	img {
		border:15px;
		border-style: none;
	}
	.headerImage {
		width: 1820px;
		height: 200px;
		margin-left: 50px ;
		background-color: black;

	}
	#titleImage {
		display: block;
    margin: 0 auto;
		padding-top: 30px;
  	width: 900px;
  	height: 169px;
		min-width: 0%;
		min-height: 0%;
	}
	.container {
		display:block;
		max-width: 1920px;
		width: 1870px;
		/*margin-top: 200px;*/
		margin-top: 0px;
		margin-left: 50px ;
  		margin-right: auto ;
  		position: fixed;
	}
	.row {

	}
	.tile {
		/*background-color: yellow;*/
		width: 260px;
		height: 260px;
		/*border-style: solid;
    	border-color: white;*/
    	float:left;
    	overflow: hidden;
	}
	img {
		width: 260px;
		height: 260px;
		min-width:100%;
		min-height:100%;

		/*background: url(http://c1.staticflickr.com/7/6101/6853156632_fc5d96cf0a_h.jpg) no-repeat center;*/
		/*background-size: cover;*/
	}
	.mark {
		display:block;
		background-color: black;
		/*position: absolute;*/
		width: 1920;
		height: 1080;
		/*z-index: 1;*/
		/*background-image: url('../assets/kentebg.png');
		background-repeat: no-repeat;
		background-size:100%;*/

	}
</style>
<script src="../scripts/vendor/jquery-2.1.4.min.js"></script>
<script src="/scripts/vendor/socket.io.js"></script>
<html>
<body>
<div class="mark">
	<div class="headerImage"><img id='titleImage' src='/wall2/Community_Quilt_Title.png'></img></div>
	<div class='container'>
		<div class='row row-1'>
			<div class="tile"><img id='p1' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p2' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p13' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p14' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p15' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p3' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p4' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
		</div>
		<div class='row row-2'>
			<div class="tile" ><img id='p5' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p6' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p16' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p17' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p18' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p7' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p8' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
		</div>
		<div class='row row-3'>
			<div class="tile" ><img id='p9' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p10' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p19' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p20' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p21' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p11' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
			<div class="tile" ><img id='p12' src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"/></div>
		</div>
	</div>
</div>
</body>
</html>

<script type="text/javascript">
var p = [];
var oldestPindex = 1;
$( document ).ready(function() {

	 $("body").keyup(function(e){

        if (e.which == 65) {// a
	     e.preventDefault();
	     // console.log(e);
	     newPatternReceived('placeholder.png');
   		}
   		if (e.which == 13) {// ENTER
	     e.preventDefault();
	     // console.log(e);
	     newPatternReceived('placeholder.png');
   		}
    });

	var socket = io();
	socket.on('patternSaved', function(data){
		console.log(data);
		newPatternReceived(data.url);
	});

    p[1] = $('#p1');
    p[2] = $('#p2');
    p[3] = $('#p3');
    p[4] = $('#p4');
    p[5] = $('#p5');
    p[6] = $('#p6');
    p[7] = $('#p7');
    p[8] = $('#p8');
    p[9] = $('#p9');
    p[10] = $('#p10');
    p[11] = $('#p11');
    p[12] = $('#p12');
    p[13] = $('#p13');
    p[14] = $('#p14');
    p[15] = $('#p15');
    p[16] = $('#p16');
    p[17] = $('#p17');
    p[18] = $('#p18');
    p[19] = $('#p19');
    p[20] = $('#p20');
    p[21] = $('#p21');

    getRecentPatterns();

});

function newPatternReceived(url){
	if(p[13].attr('src') != "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA"){
		p[oldestPindex].attr('src', p[13].attr('src'));
		if(oldestPindex < 12)
			oldestPindex++;
		else if(oldestPindex == 12) oldestPindex = 1;
	}
	for(var i=13;i<=21; i++){
		p[i].attr('src','/community_uploads/'+url);
	}
}


function getRecentPatterns(){
	$.get( "/kente", function( data ) {
	  console.log(data);

	  data.patterns.forEach(function(entry) {
    		newPatternReceived(entry.url);
    	});
	});
}

</script>
